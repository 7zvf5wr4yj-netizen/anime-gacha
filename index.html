<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>DECK ROASTER ULTIMATE v12.0</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root { --red: #ff003c; --cyan: #00f2ff; --bg: #030303; }
    body { background: var(--bg); color: #fff; font-family: 'Outfit', sans-serif; margin: 0; overflow: hidden; }
    
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-thumb { background: var(--red); border-radius: 10px; }

    .app { display: flex; flex-direction: column; height: 100vh; max-width: 500px; margin: 0 auto; border: 1px solid #1a1a1a; background: radial-gradient(circle at center, #0a0a0a 0%, #000 100%); }
    
    .header { padding: 15px; text-align: center; border-bottom: 1px solid #222; }
    .glitch { font-family: 'Orbitron', sans-serif; font-size: 24px; font-weight: 900; color: #fff; text-transform: uppercase; letter-spacing: 2px; text-shadow: 2px 2px var(--red); }

    .deck-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 15px; }
    .slot { aspect-ratio: 1/1.2; background: #0a0a0a; border: 1px solid #222; border-radius: 8px; display: flex; align-items: center; justify-content: center; position: relative; cursor: pointer; transition: 0.3s; overflow: hidden; }
    .slot.filled { border-color: var(--cyan); box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }
    .slot img { width: 100%; height: 100%; object-fit: contain; }
    .slot span { font-size: 20px; opacity: 0.3; }

    .stats { padding: 10px 20px; }
    .stat-row { margin-bottom: 12px; }
    .stat-label { display: flex; justify-content: space-between; font-family: 'Orbitron'; font-size: 9px; margin-bottom: 4px; color: #888; }
    .bar-bg { background: #111; height: 4px; border-radius: 2px; }
    .bar-fill { height: 100%; width: 0%; background: var(--cyan); transition: 1s cubic-bezier(0.17, 0.67, 0.83, 0.67); box-shadow: 0 0 8px var(--cyan); }

    .btn-main { margin: 10px 20px; padding: 18px; border: none; border-radius: 12px; background: var(--red); color: white; font-family: 'Orbitron'; font-weight: 900; text-transform: uppercase; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 0 #900; }
    .btn-main:active { transform: translateY(2px); box-shadow: 0 2px 0 #900; }

    .modal { position: fixed; inset: 0; background: #000; z-index: 1000; display: none; flex-direction: column; }
    .search-area { padding: 20px; background: #0a0a0a; border-bottom: 1px solid #222; }
    #search { width: 100%; padding: 12px; background: #111; border: 1px solid var(--red); border-radius: 8px; color: white; outline: none; box-sizing: border-box; }
    
    .card-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px; overflow-y: auto; flex: 1; }
    .card-item { background: #0a0a0a; border: 1px solid #222; border-radius: 8px; padding: 5px; text-align: center; transition: 0.2s; }
    .card-item:active { transform: scale(0.95); border-color: var(--cyan); }
    .card-item img { width: 100%; border-radius: 4px; }
    .card-name { font-size: 8px; margin-top: 5px; opacity: 0.7; height: 20px; overflow: hidden; }

    .result-view { position: fixed; inset: 0; background: #000; z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
    .result-card { background: #0a0a0a; border: 2px solid var(--red); padding: 25px; border-radius: 20px; width: 90%; text-align: center; box-shadow: 0 0 30px rgba(255, 0, 60, 0.2); box-sizing: border-box; }
    #res-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-top: 15px; }
    #res-grid img { width: 100%; border-radius: 4px; border: 1px solid #333; }
  </style>
</head>
<body>

<div class="app">
  <div class="header"><div class="glitch">ROAST MY DECK</div></div>
  
  <div class="deck-grid" id="grid">
    <script>
      for(let i=0; i<8; i++) document.write(`<div class="slot" id="s${i}" onclick="openModal(${i})"><span>+</span><img id="img${i}" style="display:none"></div>`);
    </script>
  </div>

  <div class="stats">
    <div class="stat-row">
      <div class="stat-label"><span>TOXICITY LEVEL</span><span id="v-tox">0%</span></div>
      <div class="bar-bg"><div class="bar-fill" id="b-tox"></div></div>
    </div>
    <div class="stat-row">
      <div class="stat-label"><span>SKILL ISSUE (–ù–£–ë–°–¢–í–û)</span><span id="v-skill">0%</span></div>
      <div class="bar-bg"><div class="bar-fill" id="b-skill"></div></div>
    </div>
    <div class="stat-row">
      <div class="stat-label"><span style="color:var(--red)">–®–ê–ù–° –ù–ê–ô–¢–ò –î–ï–í–£–®–ö–£</span><span id="v-love">100%</span></div>
      <div class="bar-bg"><div class="bar-fill" id="b-love" style="background:var(--red); width:100%"></div></div>
    </div>
  </div>

  <button class="btn-main" onclick="analyze()">–ó–ê–ü–£–°–¢–ò–¢–¨ –ü–†–û–ñ–ê–†–ö–£</button>
</div>

<div id="modal" class="modal">
  <div class="search-area">
    <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –∫–∞—Ä—Ç—ã..." oninput="renderCards()">
    <button onclick="closeModal()" style="background:none; border:none; color:var(--red); margin-top:10px; width:100%; font-weight:bold; cursor:pointer;">–û–¢–ú–ï–ù–ê</button>
  </div>
  <div class="card-list" id="card-list"></div>
</div>

<div id="result" class="result-view">
  <div id="capture-area" class="result-card">
    <div id="res-emoji" style="font-size: 50px;">ü§Æ</div>
    <h2 id="res-title" style="font-family:'Orbitron'; color:var(--red); margin: 10px 0; font-size: 18px;"></h2>
    <p id="res-text" style="font-size: 13px; opacity: 0.9; line-height: 1.4; min-height: 60px;"></p>
    <div id="res-grid"></div>
  </div>
  <button class="btn-main" style="width:90%;" onclick="saveImage()">–°–û–•–†–ê–ù–ò–¢–¨ –î–õ–Ø TIKTOK</button>
  <button class="btn-main" style="background:#222; width:90%; box-shadow: 0 4px 0 #000;" onclick="location.reload()">–ù–û–í–´–ô –¢–ï–°–¢</button>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();

// –ê–ë–°–û–õ–Æ–¢–ù–û –ü–û–õ–ù–´–ô, –û–¢–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ù–´–ô –°–ü–ò–°–û–ö (–ë–ï–ó –£–†–ï–ó–ê–ù–ò–ô)
const RAW_NAMES = ["–ê–¥—Å–∫–∞—è –±–∞—à–Ω—è","–ê–¥—Å–∫–∞—è –≥–æ–Ω—á–∞—è","–ê—Ä–±–∞–ª–µ—Ç","–ê—Ä–º–∏—è —Å–∫–µ–ª–µ—Ç–æ–≤","–ë–∞–Ω–¥–∞ –≥–æ–±–ª–∏–Ω–æ–≤","–ë–∞–Ω–¥–∏—Ç–∫–∞","–ë–∞—à–Ω—è-–±–æ–º–±—ë–∂–∫–∞","–ë–µ–∑–¥–Ω–∞","–ë–µ—Ä—Å–µ—Ä–∫—à–∞","–ë–æ–µ–≤–æ–π —Ç–∞—Ä–∞–Ω","–ë–æ—á–∫–∞ —Å–æ —Å–∫–µ–ª–µ—Ç–∞–º–∏","–ë—Ä–µ–≤–Ω–æ","–í–∞–ª—å–∫–∏—Ä–∏—è","–í–∞—Ä–≤–∞—Ä—Å–∫–∞—è –±–æ—á–∫–∞","–í–∞—Ä–≤–∞—Ä—Å–∫–∞—è –ø—É—Å–∫–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞","–í–∞—Ä–≤–∞—Ä—ã","–í–µ–¥—å–º–∞","–í–µ–¥—å–º–∏–Ω–∞ –±–∞–±—É—à–∫–∞","–í—Å–∞–¥–Ω–∏–∫ –Ω–∞ –∫–∞–±–∞–Ω–µ","–í—Å–∞–¥–Ω–∏—Ü–∞ –Ω–∞ –±–∞—Ä–∞–Ω–µ","–í—ã—à–∏–±–∞–ª–∞","–ì–∏–≥–∞–Ω—Ç","–ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Å–∫–µ–ª–µ—Ç","–ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Å–Ω–µ–∂–æ–∫","–ì–ª–∞–≤–Ω–∞—è –±–∞–Ω–¥–∏—Ç–∫–∞","–ì–æ–±–ª–∏–Ω —Å –¥—Ä–æ—Ç–∏–∫–∞–º–∏","–ì–æ–±–ª–∏–Ω-–≥–∏–≥–∞–Ω—Ç","–ì–æ–±–ª–∏–Ω-–ø–æ–¥—Ä—ã–≤–Ω–∏–∫","–ì–æ–±–ª–∏–Ω—Å–∫–∞—è –±–æ—á–∫–∞","–ì–æ–±–ª–∏–Ω—Å–∫–∏–π –±—É—Ä","–ì–æ–±–ª–∏–Ω—à—Ç–µ–π–Ω","–ì–æ–±–ª–∏–Ω—ã","–ì–æ–±–ª–∏–Ω—ã-–∫–æ–ø–µ–π—â–∏–∫–∏","–ì–æ–±–ª–∏–Ω—è—Ç–∞","–ì–æ–ª–µ–º","–ì—Ä–∞—Ñ–∏–Ω—è —Å –∫–∏–Ω–∂–∞–ª–∞–º–∏","–ì—Ä–æ–º–æ–≤–µ—Ä–∂–µ—Ü","–î—Ä–∞–∫–æ–Ω—á–∏–∫","–î—Ä–æ–≤–æ—Å–µ–∫","–î—É—Ö –∏—Å—Ü–µ–ª–µ–Ω–∏—è","–ó–∞–º–æ—Ä–æ–∑–∫–∞","–ó–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ","–ó–µ—Ä–∫–∞–ª–æ","–ó–æ–ª–æ—Ç–æ–π —Ä—ã—Ü–∞—Ä—å","–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ –¥—É—Ö–æ–≤","–ò—Å—Ü–µ–ª–µ–Ω–∏–µ","–ö–∞–Ω–æ–Ω–∏—Ä","–ö–ª–∞–¥–±–∏—â–µ","–ö–ª–µ—Ç–∫–∞ —Å –≥–æ–±–ª–∏–Ω–æ–º","–ö–ª–æ–Ω","–ö–æ–ª–¥—É–Ω","–ö–æ—Ä–æ–ª–µ–≤–∞ –ª—É—á–Ω–∏—Ü","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∞—è –ø–æ—á—Ç–∞","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –∫–∞–±–∞–Ω—ã","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ —Ä–µ–∫—Ä—É—Ç—ã","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –≥–∏–≥–∞–Ω—Ç","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –ø–æ–≤–∞—Ä","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –ø—Ä–∏–∑—Ä–∞–∫","–ö–æ—Ä–æ–ª—å Royale","–ö–æ—Ä–æ–ª—å —Å–∫–µ–ª–µ—Ç–æ–≤","–ö–æ—Å—Ç—è–Ω—ã–µ –¥—Ä–∞–∫–æ–Ω—ã","–õ–µ–¥—è–Ω–æ–π –≥–æ–ª–µ–º","–õ–µ–¥—è–Ω–æ–π –¥—É—Ö","–õ–µ–¥—è–Ω–æ–π –∫–æ–ª–¥—É–Ω","–õ–µ–¥—è–Ω–æ–π —Å—É–ø–µ—Ä–≥–æ–ª–µ–º","–õ–µ—Ç—É—á–∏–µ –º—ã—à–∏","–õ–µ—Ç—É—á–∫–∞","–õ–æ–∑–∞","–õ—É—á–Ω–∏—Ü—ã","–ú–∞–≥–∏—á–µ—Å–∫–∏–π –ª—É—á–Ω–∏–∫","–ú–∞–ª–µ–Ω—å–∫–∏–π –ü—Ä–∏–Ω—Ü","–ú–µ–≥–∞–º–∏–Ω—å–æ–Ω","–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å","–ú–∏–Ω–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã","–ú–∏–Ω–∏-–ü.–ï.–ö.–ö.–ê.","–ú–∏–Ω—å–æ–Ω—ã","–ú–æ–ª–Ω–∏—è","–ú–æ–Ω–∞—Ö","–ú–æ—Ä—Ç–∏—Ä–∞","–ú—É—à–∫–µ—Ç—ë—Ä","–ù–∞–¥–≥—Ä–æ–±–∏–µ","–ù–æ—á–Ω–∞—è –≤–µ–¥—å–º–∞","–û–≥–Ω–µ–Ω–Ω–∞—è –ª—É—á–Ω–∏—Ü–∞","–û–≥–Ω–µ–Ω–Ω—ã–π –¥—É—Ö","–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä","–û—Ä–¥–∞ –º–∏–Ω—å–æ–Ω–æ–≤","–û—Ö–æ—Ç–Ω–∏–∫","–ü.–ï.–ö.–ö.–ê.","–ü–∞–ª–∞—á","–ü–µ—á—å","–ü–ª–∞–º–µ–Ω–Ω—ã–π –¥—Ä–∞–∫–æ–Ω","–ü–æ–≤–æ–∑–∫–∞ —Å –ø—É—à–∫–æ–π","–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫—É—Å—Ç","–ü–æ–¥—Ä—ã–≤–Ω–∏–∫","–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è —Ä–∞–∫–µ—Ç–∞","–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è —Ö–∏–∂–∏–Ω–∞","–ü—Ä–∏–Ω—Ü","–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞","–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ –∏–∑ –±–∞—à–Ω–∏","–ü—É—à–∫–∞","–†–∞–∑–±–æ–π–Ω–∏–∫–∏","–†–∞–∑—Ä—è–¥","–†–∞–∫–µ—Ç–∞","–†—É–Ω–∏—á–µ—Å–∫–∞—è –≥–∏–≥–∞–Ω—Ç—à–∞","–†—ã–±–∞–∫","–†—ã—Ü–∞—Ä—å","–°–∞–Ω—Ç–∞ –Ω–∞ –∫–∞–±–∞–Ω–µ","–°–±–æ—Ä—â–∏–∫ —ç–ª–∏–∫—Å–∏—Ä–∞","–°–∫–µ–ª–µ—Ç—ã","–°–ø–∞—Ä–∫–∏","–°—Ç–µ–Ω–æ–±–æ–∏","–°—Ç—Ä–∞–∂–∏","–°—Ç—Ä–µ–ª—ã","–°—É–ø–µ—Ä-–∞–¥—Å–∫–∞—è –≥–æ–Ω—á–∞—è","–°—É–ø–µ—Ä–≤–µ–¥—å–º–∞","–°—É–ø–µ—Ä–º–∞–≥–∏—á–µ—Å–∫–∏–π –ª—É—á–Ω–∏–∫","–°—É–ø–µ—Ä–º–∏–Ω–∏-–ü.–ï.–ö.–ö.–ê.","–¢—ë–º–Ω—ã–π –ø—Ä–∏–Ω—Ü","–¢–µ—Ä—Ä–∏","–¢–µ—Å–ª–∞","–¢–æ—Ä–Ω–∞–¥–æ","–¢—Ä–∏ –º—É—à–∫–µ—Ç—ë—Ä–∞","–¢—Ä–∏–æ –∫–æ–ª–¥—É–Ω–æ–≤","–§–µ–Ω–∏–∫—Å","–•–∏–∂–∏–Ω–∞ –≤–∞—Ä–≤–∞—Ä–æ–≤","–•–∏–∂–∏–Ω–∞ –≥–æ–±–ª–∏–Ω–æ–≤","–¶–µ–ª–∏—Ç–µ–ª—å–Ω–∏—Ü–∞-–≤–æ–∏–Ω","–®–∞—Ä","–®–∞—Ö—Ç—ë—Ä","–®—É—Å—Ç—Ä—ã–π —à–∞—Ö—Ç—ë—Ä","–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –¥—É—Ö","–≠–ª–µ–∫—Ç—Ä–æ–≥–∏–≥–∞–Ω—Ç","–≠–ª–µ–∫—Ç—Ä–æ–¥—Ä–∞–∫–æ–Ω","–≠–ª–∏–∫—Å–∏—Ä–Ω—ã–π –≥–æ–ª–µ–º","–≠–ª–∏—Ç–Ω—ã–µ –≤–∞—Ä–≤–∞—Ä—ã","–Ø–¥","–Ø—Ä–æ—Å—Ç—å"];

// –£–º–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä ID –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
const ALL_CARDS = RAW_NAMES.map(name => {
  let id = name.toLowerCase()
    .replace(/ /g, '-')
    .replace(/\./g, '')
    .replace(/—ë/g, 'e');
  
  if(name === "–ü.–ï.–ö.–ö.–ê.") id = "pekka";
  if(name === "–ú–∏–Ω–∏-–ü.–ï.–ö.–ö.–ê.") id = "mini-pekka";
  
  return {
    name,
    id: id,
    toxic: ["–ê—Ä–±–∞–ª–µ—Ç","–ó–∞–º–æ—Ä–æ–∑–∫–∞","–ó–µ—Ä–∫–∞–ª–æ","–ú–æ—Ä—Ç–∏—Ä–∞","–≠–ª–µ–∫—Ç—Ä–æ–≥–∏–≥–∞–Ω—Ç","–Ø—Ä–æ—Å—Ç—å","–¢–æ—Ä–Ω–∞–¥–æ","–≠–ª–∏—Ç–Ω—ã–µ –≤–∞—Ä–≤–∞—Ä—ã"].includes(name),
    noob: ["–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å","–ö–æ–ª–¥—É–Ω","–í–µ–¥—å–º–∞","–ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Å–∫–µ–ª–µ—Ç","–í–∞—Ä–≤–∞—Ä—ã","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —Ä–µ–∫—Ä—É—Ç—ã"].includes(name),
    winCon: ["–í—Å–∞–¥–Ω–∏–∫ –Ω–∞ –∫–∞–±–∞–Ω–µ","–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –≥–∏–≥–∞–Ω—Ç","–®–∞—Ö—Ç—ë—Ä","–ì–æ–ª–µ–º","–ê—Ä–±–∞–ª–µ—Ç","–ú–æ—Ä—Ç–∏—Ä–∞","–ë–æ—á–∫–∞ —Å –≥–æ–±–ª–∏–Ω–∞–º–∏","–®–∞—Ä"].includes(name)
  };
});

let deck = Array(8).fill(null);
let slotIdx = 0;

function openModal(i) { slotIdx = i; document.getElementById('modal').style.display = 'flex'; renderCards(); }
function closeModal() { document.getElementById('modal').style.display = 'none'; }

function renderCards() {
  const q = document.getElementById('search').value.toLowerCase();
  const list = document.getElementById('card-list');
  list.innerHTML = ALL_CARDS.filter(c => c.name.toLowerCase().includes(q)).map(c => `
    <div class="card-item" onclick="selectCard('${c.name}')">
      <img src="https://raw.githubusercontent.com/RoyaleAPI/cr-api-assets/master/cards/${c.id}.png" onerror="this.src='https://placehold.co/100x130?text=CR'">
      <div class="card-name">${c.name}</div>
    </div>
  `).join('');
}

function selectCard(name) {
  const card = ALL_CARDS.find(c => c.name === name);
  deck[slotIdx] = card;
  const s = document.getElementById(`s${slotIdx}`);
  const img = document.getElementById(`img${slotIdx}`);
  
  img.src = `https://raw.githubusercontent.com/RoyaleAPI/cr-api-assets/master/cards/${card.id}.png`;
  img.style.display = 'block';
  s.querySelector('span').style.display = 'none';
  s.classList.add('filled');
  closeModal();
  updateStats();
  tg.HapticFeedback.impactOccurred('light');
}

function updateStats() {
  const d = deck.filter(c => c);
  const tox = (d.filter(c => c.toxic).length / 3) * 100;
  const noob = (d.filter(c => c.noob).length / 3) * 100;
  
  document.getElementById('b-tox').style.width = Math.min(100, tox) + '%';
  document.getElementById('v-tox').innerText = Math.round(tox) + '%';
  document.getElementById('b-skill').style.width = Math.min(100, noob) + '%';
  document.getElementById('v-skill').innerText = Math.round(noob) + '%';
  
  const love = Math.max(0, 100 - (tox + noob));
  document.getElementById('b-love').style.width = love + '%';
  document.getElementById('v-love').innerText = Math.round(love) + '%';
}

// –ù–û–í–´–ô, –°–¢–ê–ë–ò–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó–ê–¢–û–† –° –ü–†–ò–û–†–ò–¢–ï–¢–ê–ú–ò
function analyze() {
  if(deck.includes(null)) return tg.showAlert("–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏ 8 –∫–∞—Ä—Ç!");
  
  const d = deck;
  const names = d.map(c => c.name);
  const toxCount = d.filter(c => c.toxic).length;
  const noobCount = d.filter(c => c.noob).length;
  const winIcons = d.filter(c => c.winCon).length;
  
  let title, text, emoji;
  
  // –ü–†–ò–û–†–ò–¢–ï–¢ 1: –£–õ–¨–¢–†–ê-–¢–û–ö–°–ò–ö–ò
  if(toxCount >= 3 && names.includes("–ê—Ä–±–∞–ª–µ—Ç")) {
    title = "–û–°–ê–î–ù–´–ô –ß–ï–†–í–¨"; emoji = "‚ò£Ô∏è";
    text = "–ê—Ä–±–∞–ª–µ—Ç –∏ –≥–æ—Ä–∞ —Ç–æ–∫—Å–∏—á–Ω–æ–≥–æ –º—É—Å–æ—Ä–∞? –¢–≤–æ—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è ‚Äî —Å–∏–¥–µ—Ç—å –∑–∞ –∑–∞–±–æ—Ä–æ–º –∏ –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ —É–º—Ä—ë—Ç –æ—Ç —Å–∫—É–∫–∏. –£ —Ç–µ–±—è –Ω–µ—Ç –¥—Ä—É–∑–µ–π, –∏ —ç—Ç–æ –∑–∞—Å–ª—É–∂–µ–Ω–Ω–æ.";
  }
  // –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ú–ò–î–õ–ê–î–î–ï–† –ö–û–ú–ë–û
  else if(names.includes("–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å") && names.includes("–í–µ–¥—å–º–∞")) {
    title = "–ö–û–†–û–õ–¨ –ú–ò–î–õ–ê–î–î–ï–†–ê"; emoji = "ü§°";
    text = "–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å –∏ –í–µ–¥—å–º–∞ –Ω–∞ –º–æ—Å—Ç ‚Äî –≤–æ—Ç –∏ –≤–µ—Å—å —Ç–≤–æ–π –≥–µ–π–º–ø–ª–µ–π. –¢—ã –∑–∞—Å—Ç—Ä—è–ª –Ω–∞ 5000 –∫—É–±–∫–æ–≤ –≤ 2019 –≥–æ–¥—É –∏ –≤–∏–Ω–∏—à—å –≤–æ –≤—Å—ë–º –±–∞–ª–∞–Ω—Å. –£–¥–∞–ª–∏ –∏–≥—Ä—É.";
  }
  // –ü–†–ò–û–†–ò–¢–ï–¢ 3: LOGBAIT –ö–û–ü–ò–ü–ê–°–¢
  else if(names.includes("–ì–æ–±–ª–∏–Ω—Å–∫–∞—è –±–æ—á–∫–∞") && names.includes("–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞") && names.includes("–ê—Ä–º–∏—è —Å–∫–µ–ª–µ—Ç–æ–≤")) {
    title = "LOGBAIT –†–ê–ë"; emoji = "üêÄ";
    text = "–û–≥–æ, Logbait. –°–≤–æ–µ–≥–æ –º–æ–∑–≥–∞ –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ —Å–æ–±—Ä–∞—Ç—å –¥–µ–∫—É, —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª —É —é—Ç—É–±–µ—Ä–∞? –¢—ã –∂–∞–ª–æ–∫. –ö–∏–¥–∞–π –±–æ—á–∫–∏, –ø–æ–∫–∞ —è –∫–∏–¥–∞—é —Ç–≤–æ–π –≥–µ–π–º–ø–ª–µ–π –≤ –º—É—Å–æ—Ä–∫—É.";
  }
  // –ü–†–ò–û–†–ò–¢–ï–¢ 4: –ü–ò–í–ù–ê–Ø –î–ï–ö–ê (2+ –í–ò–ù–ö–û–ù–ê)
  else if(winIcons >= 2) {
    title = "–í–ò–ì–ï–ù–ï–ì–†–ï–¢ –ò–ó –ö–ê–†–¢"; emoji = "ü§Æ";
    text = "–í—Å–∞–¥–Ω–∏–∫ –Ω–∞ –∫–∞–±–∞–Ω–µ –ò –®–∞—Ö—Ç—ë—Ä –≤ –æ–¥–Ω–æ–π –¥–µ–∫–µ? –ó–∞—á–µ–º? –¢—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞–∫–∏–¥–∞–ª –≤–∏–Ω–∫–æ–Ω–æ–≤, –Ω–µ –ø–æ–Ω–∏–º–∞—è, –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç. –≠—Ç–æ –Ω–µ –¥–µ–∫–∞, —ç—Ç–æ –∫–∞—à–∞ –∏–∑ —Ç–æ–ø–æ—Ä–∞.";
  }
  // –ü–†–ò–û–†–ò–¢–ï–¢ 5: –ú–ï–¢–ê –î–ï–ö–ê (–ï–°–õ–ò –ù–ï–¢ –ù–£–ë–°–ö–ò–• –ö–ê–†–¢ –ò –ú–ù–û–ì–û –¢–û–ö–°–ò–ö–ê)
  else if(noobCount === 0 && toxCount > 0) {
    title = "–ú–ï–¢–ê-–†–ê–ë –ë–ï–ó –ú–û–ó–ì–ê"; emoji = "ü§ñ";
    text = "–í—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –¥–µ–∫–∞ –∏–∑ —Ç–æ–ø–∞, –Ω–æ –∏–≥—Ä–∞–µ—à—å —Ç—ã –µ—é, –∫–∞–∫ –Ω—É–±. –†—É–∫–∏ –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è, —Ç–∞–∫ —á—Ç–æ —É–¥–∞—á–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç—å –∫—Ä—É—Ç–æ–π –¥–µ–∫–æ–π.";
  }
  // –ü–†–ò–û–†–ò–¢–ï–¢ 6: –•–û–†–û–®–ê–Ø –î–ï–ö–ê (–ü–†–ò–ó–ù–ê–ù–ò–ï –°–ö–ò–õ–õ–ê)
  else if(noobCount === 0 && toxCount === 0 && d.some(c => c.winCon)) {
    title = "–°–ö–ò–õ–õ–û–í–´–ô –ò–ì–†–û–ö (–£–í–ê–ñ–ï–ù–ò–ï)"; emoji = "üóø";
    text = "–û–ø–∞, –±–∞–ª–∞–Ω—Å –µ—Å—Ç—å. –ù–µ—Ç –Ω—É–±—Å–∫–∏—Ö –∫–∞—Ä—Ç, –µ—Å—Ç—å –≤–∏–Ω–∫–æ–Ω –∏ –∑–∞—â–∏—Ç–∞. –õ–∏–±–æ —Ç—ã –ø—Ä–æ—Ñ–∏, –ª–∏–±–æ —Ç—ã —É–∫—Ä–∞–ª –¥–µ–∫—É –∏ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏–≥—Ä–∞–µ—à—å. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ ‚Äî –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ—Å—Ç–æ–π–Ω–æ.";
  }
  // –î–ï–§–û–õ–¢–ù–´–ô –í–ê–†–ò–ê–ù–¢
  else {
    title = "–°–õ–£–ß–ê–ô–ù–´–ô –û–í–û–©"; emoji = "ü§∑‚Äç‚ôÇÔ∏è";
    text = "–Ø –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–ª —Ç–≤–æ—é –¥–µ–∫—É –∏ –Ω–∞—à–µ–ª —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø—Ä–æ–±–ª–µ–º—É: –¢–ï–ë–Ø. –ö–∞—Ä—Ç—ã –Ω–µ —Å–∏–Ω–µ—Ä–≥–∏—Ä—É—é—Ç, —Ç—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞–∫–∏–¥–∞–ª –º—É—Å–æ—Ä–∞. –°—Ö–æ–¥–∏ –≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É.";
  }

  document.getElementById('res-title').innerText = title;
  document.getElementById('res-text').innerText = text;
  document.getElementById('res-emoji').innerText = emoji;
  document.getElementById('res-grid').innerHTML = d.map(c => `<img src="https://raw.githubusercontent.com/RoyaleAPI/cr-api-assets/master/cards/${c.id}.png">`).join('');
  document.getElementById('result').style.display = 'flex';
  tg.HapticFeedback.notificationOccurred('error');
}

function saveImage() {
  const target = document.getElementById('capture-area');
  html2canvas(target, { backgroundColor: '#000' }).then(canvas => {
    const link = document.createElement('a');
    link.download = 'roast_result.png';
    link.href = canvas.toDataURL();
    link.click();
    tg.showAlert("–°–∫—Ä–∏–Ω—à–æ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –≥–∞–ª–µ—Ä–µ—é!");
  });
}
</script>
</body>
</html>
