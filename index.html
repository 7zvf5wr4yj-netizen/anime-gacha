<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ROASTER AI - TOTAL DESTRUCTION</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #00f2ff; --pink: #ff007a; --purple: #bc13fe; --gold: #ffcf00; --bg: #020202; }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; }
    
    .app-container { height: 100vh; display: flex; flex-direction: column; background: radial-gradient(circle at 50% -20%, #1a0033, #020202); }
    
    .header { padding: 15px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .header h1 { font-family: 'Orbitron'; font-size: 16px; margin: 0; letter-spacing: 3px; color: var(--accent); }

    .deck-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding: 15px; }
    .slot { aspect-ratio: 1/1.25; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; position: relative; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
    .slot.filled { border-color: var(--accent); }
    .slot.evo { border-color: var(--purple); box-shadow: 0 0 15px rgba(188, 19, 254, 0.4); }
    .slot.champ { border-color: var(--gold); box-shadow: 0 0 15px rgba(255, 207, 0, 0.4); }
    .slot img { width: 95%; height: 95%; object-fit: contain; }
    .slot .label { position: absolute; bottom: -2px; right: -2px; font-size: 7px; background: #000; padding: 2px 4px; border-radius: 4px; font-family: 'Orbitron'; border: 1px solid rgba(255,255,255,0.2); }

    .stats-area { padding: 10px 20px; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }
    .stat-bar { margin-bottom: 12px; }
    .stat-info { display: flex; justify-content: space-between; font-size: 9px; font-family: 'Orbitron'; margin-bottom: 4px; color: #666; }
    .track { height: 4px; background: #111; border-radius: 2px; overflow: hidden; }
    .fill { height: 100%; width: 0%; transition: 1.2s cubic-bezier(0.1, 1, 0.1, 1); }

    .btn-action { margin: 15px; padding: 18px; border: none; border-radius: 12px; background: linear-gradient(45deg, var(--pink), #ff4d00); color: #fff; font-family: 'Orbitron'; font-weight: 900; font-size: 13px; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; }

    /* Modal List */
    .modal { position: fixed; inset: 0; background: #000; z-index: 1000; display: none; flex-direction: column; }
    .search-box { padding: 15px; border-bottom: 1px solid #222; }
    #search { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #444; background: #111; color: #fff; }
    .card-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 15px; overflow-y: scroll; }
    .card-item { background: #0a0a0a; border-radius: 8px; padding: 6px; text-align: center; border: 1px solid #1a1a1a; }
    .card-item img { width: 100%; }
    .card-item span { font-size: 8px; color: #777; display: block; margin-top: 4px; }

    /* Choice */
    .choice-screen { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; display: none; align-items: center; justify-content: center; flex-direction: column; padding: 20px; }
    .choice-box { width: 100%; max-width: 280px; background: #0f0f0f; border: 1px solid #333; border-radius: 20px; padding: 20px; text-align: center; }
    .c-btn { width: 100%; padding: 15px; margin: 8px 0; border-radius: 10px; border: none; font-family: 'Orbitron'; font-weight: bold; cursor: pointer; }

    /* Result View */
    .res-view { position: fixed; inset: 0; background: #000; z-index: 3000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
    .res-card { background: #050505; border: 1px solid var(--pink); border-radius: 24px; padding: 25px; width: 100%; text-align: center; }
  </style>
</head>
<body>

<div class="app-container">
  <div class="header"><h1>DECK ROASTER TOTAL</h1></div>
  
  <div class="deck-grid">
    <script>
      for(let i=0; i<8; i++) document.write(`<div class="slot" id="s${i}" onclick="openPick(${i})"><div class="plus" id="p${i}">+</div><img id="img${i}" style="display:none"></div>`);
    </script>
  </div>

  <div class="stats-area">
    <div class="stat-bar"><div class="stat-info"><span>TOXICITY</span><span id="v-tox">0%</span></div><div class="track"><div class="fill" id="b-tox" style="background:var(--pink)"></div></div></div>
    <div class="stat-bar"><div class="stat-info"><span>SKILL ISSUE</span><span id="v-skill">0%</span></div><div class="track"><div class="fill" id="b-skill" style="background:var(--accent)"></div></div></div>
    <div class="stat-bar"><div class="stat-info"><span>VIRGINITY SCORE</span><span id="v-love">100%</span></div><div class="track"><div class="fill" id="b-love" style="background:#fff; width:100%"></div></div></div>
  </div>

  <button class="btn-action" onclick="analyze()">–ê–ù–ê–õ–ò–ó–ò–†–û–í–ê–¢–¨</button>
</div>

<div id="choice-screen" class="choice-screen">
  <div class="choice-box">
    <h4 style="margin:0 0 15px 0; font-family:'Orbitron'; font-size:12px;">–í–´–ë–ï–†–ò –ú–û–î–ò–§–ò–ö–ê–¶–ò–Æ</h4>
    <button class="c-btn" style="background:#222; color:#fff;" onclick="setMode('norm')">–û–ë–´–ß–ù–ê–Ø</button>
    <button id="e-btn" class="c-btn" style="background:var(--purple); color:#fff; display:none;" onclick="setMode('evo')">–≠–í–û–õ–Æ–¶–ò–Ø</button>
    <button id="c-btn" class="c-btn" style="background:var(--gold); color:#000; display:none;" onclick="setMode('champ')">–ß–ï–ú–ü–ò–û–ù</button>
    <button style="background:none; border:none; color:#444; margin-top:10px; font-size:10px;" onclick="closeChoice()">–û–¢–ú–ï–ù–ê</button>
  </div>
</div>

<div id="modal" class="modal">
  <div class="search-box"><input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ —Å—Ä–µ–¥–∏ 110+ –∫–∞—Ä—Ç..." oninput="draw()"></div>
  <div class="card-list" id="card-list"></div>
  <button style="padding:15px; background:#111; border:none; color:var(--pink); font-family:'Orbitron';" onclick="closePick()">–ó–ê–ö–†–´–¢–¨</button>
</div>

<div id="result" class="res-view">
  <div id="capture-area" class="res-card">
    <div id="res-emoji" style="font-size: 45px;"></div>
    <h2 id="res-title" style="font-family:'Orbitron'; color:var(--pink); font-size:18px; margin:10px 0;"></h2>
    <p id="res-text" style="font-size: 13px; line-height: 1.5; color: #888;"></p>
    <div id="res-grid" style="display:grid; grid-template-columns:repeat(4,1fr); gap:5px; margin-top:15px;"></div>
  </div>
  <button class="btn-action" style="width:100%" onclick="save()">–°–û–•–†–ê–ù–ò–¢–¨</button>
  <button onclick="location.reload()" style="background:none; border:none; color:#444; margin-top:10px;">–ó–ê–ù–û–í–û</button>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();

// –ê–ë–°–û–õ–Æ–¢–ù–ê–Ø –ë–ê–ó–ê –ö–ê–†–¢ (110+)
const ALL_CARDS = [
  // –í–æ–π—Å–∫–∞
  {n:"–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å",id:"mega-knight",evo:true,t:60,s:80},{n:"–ü.–ï.–ö.–ö.–ê.",id:"pekka",evo:true,t:20,s:20},{n:"–í—Å–∞–¥–Ω–∏–∫ –Ω–∞ –∫–∞–±–∞–Ω–µ",id:"hog-rider",evo:true,t:40,s:10},
  {n:"–≠–ª–∏—Ç–Ω—ã–µ –≤–∞—Ä–≤–∞—Ä—ã",id:"elite-barbarians",evo:true,t:90,s:70},{n:"–û–≥–Ω–µ–Ω–Ω–∞—è –ª—É—á–Ω–∏—Ü–∞",id:"firecracker",evo:true,t:50,s:10},{n:"–í–∞–ª—å–∫–∏—Ä–∏—è",id:"valkyrie",evo:true,t:10,s:10},
  {n:"–í–µ–¥—å–º–∞",id:"witch",t:30,s:50},{n:"–ö–æ–ª–¥—É–Ω",id:"wizard",evo:true,t:15,s:60},{n:"–ú—É—à–∫–µ—Ç—ë—Ä",id:"musketeer",evo:true,t:5,s:10},
  {n:"–ü—Ä–∏–Ω—Ü",id:"prince",t:20,s:20},{n:"–¢—ë–º–Ω—ã–π –ø—Ä–∏–Ω—Ü",id:"dark-prince",t:15,s:15},{n:"–ú–∏–Ω–∏ –ü.–ï.–ö.–ö.–ê.",id:"mini-pekka",t:10,s:10},
  {n:"–ì–∏–≥–∞–Ω—Ç",id:"giant",t:10,s:15},{n:"–ì–æ–ª–µ–º",id:"golem",t:40,s:40},{n:"–≠–ª–µ–∫—Ç—Ä–æ–≥–∏–≥–∞–Ω—Ç",id:"electro-giant",t:80,s:50},
  {n:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –≥–∏–≥–∞–Ω—Ç",id:"royal-giant",evo:true,t:50,s:20},{n:"–ì–æ–±–ª–∏–Ω-–≥–∏–≥–∞–Ω—Ç",id:"goblin-giant",evo:true,t:45,s:20},{n:"–°–∫–µ–ª–µ—Ç—ã",id:"skeletons",evo:true,t:5,s:5},
  {n:"–ê—Ä–º–∏—è —Å–∫–µ–ª–µ—Ç–æ–≤",id:"skeleton-army",t:5,s:15},{n:"–ì–≤–∞—Ä–¥–µ–π—Ü—ã",id:"guards",t:10,s:15},{n:"–í–∞—Ä–≤–∞—Ä—ã",id:"barbarians",evo:true,t:15,s:25},
  {n:"–ë–∞–Ω–¥–∞ –≥–æ–±–ª–∏–Ω–æ–≤",id:"goblin-gang",t:15,s:10},{n:"–ú–∏–Ω—å–æ–Ω—ã",id:"minions",t:5,s:5},{n:"–û—Ä–¥–∞ –º–∏–Ω—å–æ–Ω–æ–≤",id:"minion-horde",t:30,s:50},
  {n:"–õ–µ—Ç—É—á–∏–µ –º—ã—à–∏",id:"bats",evo:true,t:10,s:10},{n:"–®–∞—Ö—Ç—ë—Ä",id:"miner",t:20,s:30},{n:"–®–∞—Ä",id:"balloon",t:40,s:30},
  {n:"–ê–¥—Å–∫–∞—è –≥–æ–Ω—á–∞—è",id:"lava-hound",t:25,s:20},{n:"–î—Ä–∞–∫–æ–Ω—á–∏–∫",id:"baby-dragon",t:5,s:10},{n:"–ü–ª–∞–º–µ–Ω–Ω—ã–π –¥—Ä–∞–∫–æ–Ω",id:"inferno-dragon",t:20,s:20},
  {n:"–≠–ª–µ–∫—Ç—Ä–æ–¥—Ä–∞–∫–æ–Ω",id:"electro-dragon",t:20,s:20},{n:"–§–µ–Ω–∏–∫—Å",id:"phoenix",t:25,s:20},{n:"–í—ã—à–∏–±–∞–ª–∞",id:"bowler",t:35,s:20},
  {n:"–ü–∞–ª–∞—á",id:"executioner",t:20,s:20},{n:"–ú–∞–≥–∏—á–µ—Å–∫–∏–π –ª—É—á–Ω–∏–∫",id:"magic-archer",t:25,s:40},{n:"–ì—Ä–æ–º–æ–≤–µ—Ä–∂–µ—Ü",id:"electro-wizard",t:10,s:15},
  {n:"–õ–µ–¥—è–Ω–æ–π –∫–æ–ª–¥—É–Ω",id:"ice-wizard",evo:true,t:15,s:20},{n:"–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞",id:"princess",t:30,s:10},{n:"–ë–∞–Ω–¥–∏—Ç–∫–∞",id:"bandit",t:20,s:15},
  {n:"–†—ã–±–∞–∫",id:"fisherman",t:20,s:40},{n:"–û—Ö–æ—Ç–Ω–∏–∫",id:"hunter",t:10,s:20},{n:"–î—Ä–æ–≤–æ—Å–µ–∫",id:"lumberjack",t:35,s:20},
  {n:"–°–ø–∞—Ä–∫–∏",id:"sparky",t:60,s:40},{n:"–ú–µ–≥–∞–º–∏–Ω—å–æ–Ω",id:"mega-minion",t:5,s:10},{n:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –∫–∞–±–∞–Ω—ã",id:"royal-hogs",t:25,s:20},
  {n:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ —Ä–µ–∫—Ä—É—Ç—ã",id:"royal-recruits",evo:true,t:50,s:60},{n:"–í–µ–¥—å–º–∏–Ω–∞ –±–∞–±—É—à–∫–∞",id:"mother-witch",t:20,s:20},{n:"–î—É—Ö –ª—å–¥–∞",id:"ice-spirit",evo:true,t:5,s:10},
  {n:"–î—É—Ö –æ–≥–Ω—è",id:"fire-spirit",t:5,s:5},{n:"–î—É—Ö —ç–ª–µ–∫—Ç—Ä–æ",id:"electro-spirit",t:10,s:5},{n:"–î—É—Ö –∏—Å—Ü–µ–ª–µ–Ω–∏—è",id:"heal-spirit",t:15,s:10},
  {n:"–¶–µ–ª–∏—Ç–µ–ª—å–Ω–∏—Ü–∞-–≤–æ–∏–Ω",id:"battle-healer",t:50,s:50},{n:"–≠–ª–∏–∫—Å–∏—Ä–Ω—ã–π –≥–æ–ª–µ–º",id:"elixir-golem",t:70,s:60},{n:"–°—Ç–µ–Ω–æ–±–æ–∏",id:"wall-breakers",evo:true,t:25,s:20},
  // –ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è
  {n:"–ë—Ä–µ–≤–Ω–æ",id:"the-log",t:5,s:10},{n:"–°—Ç—Ä–µ–ª—ã",id:"arrows",t:5,s:5},{n:"–†–∞–∑—Ä—è–¥",id:"zap",evo:true,t:10,s:5},
  {n:"–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä",id:"fireball",t:5,s:10},{n:"–Ø–¥",id:"poison",t:15,s:15},{n:"–†–∞–∫–µ—Ç–∞",id:"rocket",t:40,s:20},
  {n:"–ú–æ–ª–Ω–∏—è",id:"lightning",t:20,s:15},{n:"–ó–µ–º–ª–µ—Ç—Ä—è—Å–µ–Ω–∏–µ",id:"earthquake",t:25,s:10},{n:"–¢–æ—Ä–Ω–∞–¥–æ",id:"tornado",t:50,s:30},
  {n:"–ó–∞–º–æ—Ä–æ–∑–∫–∞",id:"freeze",t:95,s:80},{n:"–Ø—Ä–æ—Å—Ç—å",id:"rage",t:50,s:40},{n:"–ó–µ—Ä–∫–∞–ª–æ",id:"mirror",t:70,s:50},
  {n:"–ö–ª–æ–Ω",id:"clone",t:60,s:60},{n:"–ë–æ—á–∫–∞ —Å –≥–æ–±–ª–∏–Ω–∞–º–∏",id:"goblin-barrel",evo:true,t:45,s:15},{n:"–ë–æ—á–∫–∞ —Å–æ —Å–∫–µ–ª–µ—Ç–∞–º–∏",id:"skeleton-barrel",t:25,s:15},
  {n:"–ì–æ–±–ª–∏–Ω—Å–∫–∏–π –±—É—Ä",id:"goblin-drill",evo:true,t:40,s:20},{n:"–ö–ª–∞–¥–±–∏—â–µ",id:"graveyard",t:40,s:30},
  // –ó–¥–∞–Ω–∏—è
  {n:"–ü—É—à–∫–∞",id:"cannon",evo:true,t:10,s:10},{n:"–¢–µ—Å–ª–∞",id:"tesla",evo:true,t:20,s:15},{n:"–ê–¥—Å–∫–∞—è –±–∞—à–Ω—è",id:"inferno-tower",t:20,s:10},
  {n:"–ë–∞—à–Ω—è-–±–æ–º–±—ë–∂–∫–∞",id:"bomb-tower",evo:true,t:25,s:10},{n:"–ú–æ—Ä—Ç–∏—Ä–∞",id:"mortar",evo:true,t:50,s:30},{n:"–ê—Ä–±–∞–ª–µ—Ç",id:"x-bow",t:70,s:50},
  {n:"–ù–∞–¥–≥—Ä–æ–±–∏–µ",id:"tombstone",t:5,s:15},{n:"–ö–ª–µ—Ç–∫–∞ —Å –≥–æ–±–ª–∏–Ω–æ–º",id:"goblin-cage",evo:true,t:15,s:15},{n:"–ü–µ—á—å",id:"furnace",t:60,s:50},
  {n:"–•–∏–∂–∏–Ω–∞ –≥–æ–±–ª–∏–Ω–æ–≤",id:"goblin-hut",t:60,s:60},{n:"–•–∏–∂–∏–Ω–∞ –≤–∞—Ä–≤–∞—Ä–æ–≤",id:"barbarian-hut",t:50,s:50},{n:"–°–±–æ—Ä—â–∏–∫ —ç–ª–∏–∫—Å–∏—Ä–∞",id:"elixir-collector",t:30,s:40},
  // –ß–µ–º–ø–∏–æ–Ω—ã
  {n:"–ú–∞–ª–µ–Ω—å–∫–∏–π –ü—Ä–∏–Ω—Ü",id:"little-prince",champ:true,t:40,s:20},{n:"–ö–æ—Ä–æ–ª–µ–≤–∞ –ª—É—á–Ω–∏—Ü",id:"archer-queen",champ:true,t:30,s:20},
  {n:"–ó–æ–ª–æ—Ç–æ–π —Ä—ã—Ü–∞—Ä—å",id:"golden-knight",champ:true,t:20,s:20},{n:"–ö–æ—Ä–æ–ª—å —Å–∫–µ–ª–µ—Ç–æ–≤",id:"skeleton-king",champ:true,t:20,s:20},
  {n:"–ú–æ–Ω–∞—Ö",id:"monk",champ:true,t:30,s:30},{n:"–®—É—Å—Ç—Ä—ã–π —à–∞—Ö—Ç—ë—Ä",id:"mighty-miner",champ:true,t:25,s:20},{n:"–ì–æ–±–ª–∏–Ω—à—Ç–µ–π–Ω",id:"goblinstein",champ:true,t:45,s:20}
];

let deck = Array(8).fill(null);
let curSlot = 0;
let picked = null;

function openPick(i) { curSlot = i; document.getElementById('modal').style.display = 'flex'; draw(); }
function closePick() { document.getElementById('modal').style.display = 'none'; }
function closeChoice() { document.getElementById('choice-screen').style.display = 'none'; }

function draw() {
  const s = document.getElementById('search').value.toLowerCase();
  const l = document.getElementById('card-list');
  l.innerHTML = ALL_CARDS.filter(c => c.n.toLowerCase().includes(s)).map(c => `
    <div class="card-item" onclick="ask('${c.n}')">
      <img src="https://royaleapi.com/static/img/cards-150/${c.id}.png">
      <span>${c.n}</span>
    </div>
  `).join('');
}

function ask(name) {
  if(deck.some(d => d && d.n === name)) return tg.showAlert("–£–∂–µ –µ—Å—Ç—å!");
  picked = ALL_CARDS.find(x => x.n === name);
  document.getElementById('modal').style.display = 'none';
  document.getElementById('choice-screen').style.display = 'flex';
  document.getElementById('e-btn').style.display = picked.evo ? 'block' : 'none';
  document.getElementById('c-btn').style.display = picked.champ ? 'block' : 'none';
}

function setMode(mode) {
  let c = {...picked, mode: mode};
  deck[curSlot] = c;
  const s = document.getElementById(`s${curSlot}`);
  const img = document.getElementById(`img${curSlot}`);
  s.className = `slot filled ${mode}`;
  img.src = `https://royaleapi.com/static/img/cards-150/${c.id}${mode==='evo'?'-ev1':''}.png`;
  img.style.display = 'block';
  document.getElementById(`p${curSlot}`).style.display = 'none';
  s.innerHTML += `<div class="label">${mode.toUpperCase()}</div>`;
  closeChoice();
  upd();
}

function upd() {
  const d = deck.filter(x => x);
  const t = d.reduce((a,b) => a + (b.mode==='evo'?b.t+30:b.t), 0) / 1.8;
  const s = d.reduce((a,b) => a + b.s, 0) / 1.8;
  document.getElementById('b-tox').style.width = Math.min(100, t) + '%';
  document.getElementById('v-tox').innerText = Math.round(t) + '%';
  document.getElementById('b-skill').style.width = Math.min(100, s) + '%';
  document.getElementById('v-skill').innerText = Math.round(s) + '%';
  document.getElementById('b-love').style.width = Math.max(0, 100 - (t+s)/2.2) + '%';
}

function analyze() {
  if(deck.includes(null)) return tg.showAlert("8 –∫–∞—Ä—Ç, –±—ã—Å—Ç—Ä–æ!");
  const names = deck.map(d => d.n);
  const modes = deck.map(d => d.mode);
  let t, e, txt;

  if(names.includes("–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å") && modes.includes("evo")) {
    t = "–≠–í–û-–ú–£–°–û–†"; e = "ü§°";
    txt = "–≠–≤–æ–ª—é—Ü–∏—è –ú–ö? –¢—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –±–µ–∑–Ω–∞–¥—ë–∂–µ–Ω. –¢–≤–æ–π –≥–µ–π–º–ø–ª–µ–π ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∫–∏–¥–∞—Ç—å –∂–∏—Ä–Ω—É—é —Ç—É—à—É –Ω–∞ –º–æ—Å—Ç –∏ –Ω–∞–¥–µ—è—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ —Ç–∞–∫–æ–π –∂–µ —Ç—É–ø–æ–π, –∫–∞–∫ —Ç—ã. –°–ø–æ–π–ª–µ—Ä: –Ω–µ—Ç.";
  } else if(names.includes("–ê—Ä–±–∞–ª–µ—Ç") && names.includes("–¢–µ—Å–ª–∞")) {
    t = "–î–£–®–ù–ò–õ–ê –ì–ï–ô-–ö–õ–£–ë–ê"; e = "üß±";
    txt = "–ê—Ä–±–∞–ª–µ—Ç –∏ –¢–µ—Å–ª–∞. –¢—ã –±–æ–∏—à—å—Å—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –º–æ—Å—Ç –±–æ–ª—å—à–µ, —á–µ–º —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ —Å–≤–µ—Ç–∞. –°–∏–¥–∏—à—å –≤ —Å–≤–æ–µ–π –∫–æ–Ω—É—Ä–µ –∏ –¥—Ä–æ—á–∏—à—å –Ω–∞ —Ü–∏—Ñ—Ä—ã —É—Ä–æ–Ω–∞. –ñ–∞–ª–∫–æ–µ –∑—Ä–µ–ª–∏—â–µ.";
  } else if(modes.filter(m => m === 'evo').length >= 2) {
    t = "PAY TO WIN –†–ê–ë"; e = "üí≥";
    txt = "–î–≤–µ —ç–≤–æ–ª—é—Ü–∏–∏ –≤ –¥–µ–∫–µ. –ë–µ–∑ –∫—Ä–µ–¥–∏—Ç–∫–∏ —Ç—ã –±—ã –Ω–µ –ø–æ–¥–Ω—è–ª—Å—è –≤—ã—à–µ –≤—Ç–æ—Ä–æ–π –∞—Ä–µ–Ω—ã. –¢–≤–æ–π —Å–∫–∏–ª–ª ‚Äî —ç—Ç–æ –∏–ª–ª—é–∑–∏—è, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –¥–µ–Ω—å–≥–∞–º–∏ —Ç–≤–æ–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π.";
  } else if(names.includes("–ì–æ–±–ª–∏–Ω—Å–∫–∏–π –±—É—Ä") && names.includes("–Ø–¥")) {
    t = "–ö–†–´–°–ò–ù–´–ô –ö–û–†–û–õ–¨"; e = "üêÄ";
    txt = "–ë—É—Ä –∏ —è–¥. –¢—ã –∫–æ–≤—ã—Ä—è–µ—à—å –±–∞—à–Ω—é –ø–æ 200 —É—Ä–æ–Ω–∞ –∏ –¥—É–º–∞–µ—à—å, —á—Ç–æ —Ç—ã —Ç–∞–∫—Ç–∏–∫. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç—ã –ø—Ä–æ—Å—Ç–æ –º–µ–ª–∫–∏–π –≤—Ä–µ–¥–∏—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å–µ –ø—Ä–µ–∑–∏—Ä–∞—é—Ç.";
  } else if(!names.some(n => ["–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å", "–í–µ–¥—å–º–∞", "–ö–æ–ª–¥—É–Ω", "–≠–ª–∏—Ç–∫–∏"].includes(n)) && names.includes("–†—ã—Ü–∞—Ä—å")) {
    t = "–£–í–ê–ñ–ê–ï–ú–´–ô –ì–ò–ì–ê–ß–ê–î"; e = "üóø";
    txt = "–ù–∏–∫–∞–∫–æ–≥–æ —Å–ø–∞–º–∞, –Ω–∏–∫–∞–∫–æ–π –≥–Ω–∏–ª–∏. –ß–∏—Å—Ç—ã–π —Å–∫–∏–ª–ª –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å. –¢—ã –ª–∏–±–æ –ø—Ä–æ-–ø–ª–µ–µ—Ä, –ª–∏–±–æ –æ—á–µ–Ω—å —Å—Ç–∞—Ä–∞–µ—à—å—Å—è –∏–º –±—ã—Ç—å. –°–Ω–∏–º–∞—é —à–ª—è–ø—É.";
  } else {
    t = "–ú–ò–î–õ–ê–î–î–ï–†-–ù–´–¢–ò–ö"; e = "üí©";
    txt = "–†–∞–Ω–¥–æ–º–Ω—ã–π –Ω–∞–±–æ—Ä –∫–∞—Ä—Ç –±–µ–∑ –ª–æ–≥–∏–∫–∏. –¢—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞–∫–∏–¥–∞–ª –≤—Å—ë, —á—Ç–æ –±–ª–µ—Å—Ç–∏—Ç, –∏ —É–¥–∏–≤–ª—è–µ—à—å—Å—è, –ø–æ—á–µ–º—É —Å–∏–¥–∏—à—å –Ω–∞ 5000 –∫—É–±–∫–æ–≤. –ü–æ–ø—Ä–æ–±—É–π –≤–∫–ª—é—á–∏—Ç—å –º–æ–∑–≥.";
  }

  document.getElementById('res-title').innerText = t;
  document.getElementById('res-emoji').innerText = e;
  document.getElementById('res-text').innerText = txt;
  document.getElementById('res-grid').innerHTML = deck.map(x => `<img src="https://royaleapi.com/static/img/cards-150/${x.id}${x.mode==='evo'?'-ev1':''}.png" style="border:1px solid ${x.mode==='evo'?'#bc13fe':'#222'}; border-radius:5px;">`).join('');
  document.getElementById('result').style.display = 'flex';
  tg.HapticFeedback.notificationOccurred('warning');
}

function save() {
  html2canvas(document.getElementById('capture-area')).then(c => {
    const a = document.createElement('a'); a.download='deck.png'; a.href=c.toDataURL(); a.click();
    tg.showAlert("–°–¥–µ–ª–∞–Ω–æ!");
  });
}
</script>
</body>
</html>
