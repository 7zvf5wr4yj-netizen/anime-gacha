<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ULTIMATE DECK ROASTER AI</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root { --red: #ff003c; --cyan: #00f2ff; --bg: #000; --gold: #ffcc00; --purple: #cf19ff; }
    body { background: var(--bg); color: #fff; font-family: 'Outfit', sans-serif; margin: 0; padding: 0; overflow: hidden; }
    .app { display: flex; flex-direction: column; height: 100vh; max-width: 500px; margin: 0 auto; }
    .header { padding: 10px; text-align: center; border-bottom: 2px solid var(--red); background: #050505; }
    .glitch { font-family: 'Orbitron'; font-size: 16px; text-shadow: 2px 2px var(--red); text-transform: uppercase; }
    .deck-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; padding: 10px; background: #080808; }
    .slot { aspect-ratio: 1/1.2; background: #111; border: 1px solid #222; border-radius: 6px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }
    .slot.filled { border-color: var(--cyan); box-shadow: 0 0 10px rgba(0,242,255,0.2); }
    .slot.evo { border-color: var(--purple); box-shadow: 0 0 10px var(--purple); }
    .slot.champ { border-color: var(--gold); box-shadow: 0 0 10px var(--gold); }
    .slot img { width: 100%; height: 100%; object-fit: contain; }
    .stats { padding: 8px 15px; flex-grow: 1; background: #000; }
    .stat-row { margin-bottom: 8px; }
    .stat-label { display: flex; justify-content: space-between; font-family: 'Orbitron'; font-size: 9px; color: #666; }
    .bar-bg { background: #1a1a1a; height: 5px; border-radius: 3px; margin-top: 3px; }
    .bar-fill { height: 100%; width: 0%; background: var(--cyan); transition: 1s ease; }
    .btn-main { margin: 10px; padding: 15px; border: none; border-radius: 10px; background: var(--red); color: #fff; font-family: 'Orbitron'; font-weight: 900; cursor: pointer; }
    .modal { position: fixed; inset: 0; background: #000; z-index: 1000; display: none; flex-direction: column; }
    .search-area { padding: 15px; background: #0a0a0a; border-bottom: 1px solid #222; }
    #search { width: 100%; padding: 12px; background: #111; border: 1px solid var(--red); border-radius: 8px; color: #fff; outline: none; box-sizing: border-box; }
    .card-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 10px; overflow-y: auto; flex-grow: 1; }
    .card-item { background: #0a0a0a; border: 1px solid #222; border-radius: 8px; padding: 4px; text-align: center; }
    .card-item img { width: 100%; border-radius: 4px; min-height: 70px; }
    .evo-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; display: none; align-items: center; justify-content: center; flex-direction: column; padding: 20px; }
    .evo-btn { width: 100%; padding: 15px; margin: 5px; border-radius: 10px; border: none; font-family: 'Orbitron'; font-weight: bold; cursor: pointer; }
    .result-view { position: fixed; inset: 0; background: #000; z-index: 3000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 15px; }
    .result-card { background: #0a0a0a; border: 2px solid var(--red); border-radius: 15px; padding: 15px; text-align: center; width: 100%; }
    #res-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 4px; margin-top: 10px; }
    #res-grid img { width: 100%; border-radius: 3px; }
  </style>
</head>
<body>

<div class="app">
  <div class="header"><div class="glitch">ROASTER AI: ABSOLUTE</div></div>
  <div class="deck-grid">
    <script>
      for(let i=0; i<8; i++) document.write(`<div class="slot" id="s${i}" onclick="openModal(${i})"><img id="img${i}" style="display:none"><span id="p${i}" style="opacity:0.2">+</span></div>`);
    </script>
  </div>
  <div class="stats">
    <div class="stat-row"><div class="stat-label"><span>TOXICITY</span><span id="v-tox">0%</span></div><div class="bar-bg"><div class="bar-fill" id="b-tox"></div></div></div>
    <div class="stat-row"><div class="stat-label"><span>SKILL ISSUE</span><span id="v-skill">0%</span></div><div class="bar-bg"><div class="bar-fill" id="b-skill"></div></div></div>
    <div class="stat-row"><div class="stat-label"><span>GIRLFRIEND CHANCE</span><span id="v-love">100%</span></div><div class="bar-bg"><div class="bar-fill" id="b-love" style="background:var(--red); width:100%"></div></div></div>
  </div>
  <button class="btn-main" onclick="startRoast()">–ü–†–û–ê–ù–ê–õ–ò–ó–ò–†–û–í–ê–¢–¨ –≠–¢–û –ì–û–í–ù–û</button>
</div>

<div id="evo-choice" class="evo-overlay">
  <h2 id="choice-title" style="color:var(--cyan)">–í–´–ë–ï–†–ò –¢–ò–ü –ö–ê–†–¢–´</h2>
  <button class="evo-btn" style="background:#222; color:#fff" onclick="applyChoice('norm')">–û–ë–´–ß–ù–ê–Ø</button>
  <button id="btn-evo" class="evo-btn" style="background:var(--purple); color:#fff; display:none" onclick="applyChoice('evo')">–≠–í–û–õ–Æ–¶–ò–Ø</button>
  <button id="btn-champ" class="evo-btn" style="background:var(--gold); color:#000; display:none" onclick="applyChoice('champ')">–ß–ï–ú–ü–ò–û–ù</button>
</div>

<div id="modal" class="modal">
  <div class="search-area">
    <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –∫–∞—Ä—Ç—ã..." oninput="renderCards()">
    <button onclick="closeModal()" style="background:none; border:none; color:var(--red); margin-top:10px; width:100%; font-weight:bold;">–ó–ê–ö–†–´–¢–¨</button>
  </div>
  <div class="card-list" id="card-list"></div>
</div>

<div id="result" class="result-view">
  <div id="capture-area" class="result-card">
    <div id="res-emoji" style="font-size: 40px;"></div>
    <h2 id="res-title" style="color:var(--red); font-family:'Orbitron';"></h2>
    <p id="res-text" style="font-weight:bold;"></p>
    <div id="res-grid"></div>
  </div>
  <button class="btn-main" style="width:100%" onclick="saveResult()">–í –¢–ò–ö–¢–û–ö</button>
  <button onclick="location.reload()" style="background:none; border:none; color:#555; margin-top:10px;">–ó–ê–ù–û–í–û</button>
</div>

<script>
const tg = window.Telegram.WebApp; tg.expand();

// –ê–ë–°–û–õ–Æ–¢–ù–û –ü–û–õ–ù–´–ô –†–û–°–¢–ï–† (100+ –ö–ê–†–¢)
const CARDS = [
  {n:"–ê–¥—Å–∫–∞—è –±–∞—à–Ω—è",id:"inferno-tower",t:10,s:5},{n:"–ê–¥—Å–∫–∞—è –≥–æ–Ω—á–∞—è",id:"lava-hound",t:20,s:10},{n:"–ê—Ä–±–∞–ª–µ—Ç",id:"x-bow",t:50,s:30},
  {n:"–ê—Ä–º–∏—è —Å–∫–µ–ª–µ—Ç–æ–≤",id:"skeleton-army",t:5,s:10},{n:"–ë–∞–Ω–¥–∞ –≥–æ–±–ª–∏–Ω–æ–≤",id:"goblin-gang",t:10,s:5},{n:"–ë–∞–Ω–¥–∏—Ç–∫–∞",id:"bandit",t:15,s:10},
  {n:"–ë–∞—à–Ω—è-–±–æ–º–±—ë–∂–∫–∞",id:"bomb-tower",t:20,s:5,hasEvo:true},{n:"–ë–µ–∑–¥–Ω–∞",id:"void",t:20,s:15},{n:"–ë–æ–µ–≤–æ–π —Ç–∞—Ä–∞–Ω",id:"battle-ram",t:10,s:15,hasEvo:true},
  {n:"–ë–æ—á–∫–∞ —Å–æ —Å–∫–µ–ª–µ—Ç–∞–º–∏",id:"skeleton-barrel",t:20,s:10},{n:"–ë—Ä–µ–≤–Ω–æ",id:"the-log",t:0,s:10},{n:"–í–∞–ª—å–∫–∏—Ä–∏—è",id:"valkyrie",t:5,s:10,hasEvo:true},
  {n:"–í–∞—Ä–≤–∞—Ä—ã",id:"barbarians",t:10,s:20,hasEvo:true},{n:"–í–µ–¥—å–º–∞",id:"witch",t:25,s:50},{n:"–í–µ–¥—å–º–∏–Ω–∞ –±–∞–±—É—à–∫–∞",id:"mother-witch",t:15,s:15},
  {n:"–í—Å–∞–¥–Ω–∏–∫ –Ω–∞ –∫–∞–±–∞–Ω–µ",id:"hog-rider",t:30,s:10},{n:"–í—Å–∞–¥–Ω–∏—Ü–∞ –Ω–∞ –±–∞—Ä–∞–Ω–µ",id:"ram-rider",t:15,s:15},{n:"–í—ã—à–∏–±–∞–ª–∞",id:"bowler",t:35,s:15},
  {n:"–ì–∏–≥–∞–Ω—Ç",id:"giant",t:5,s:10},{n:"–ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Å–∫–µ–ª–µ—Ç",id:"giant-skeleton",t:30,s:30},{n:"–ì–æ–±–ª–∏–Ω-–≥–∏–≥–∞–Ω—Ç",id:"goblin-giant",t:35,s:10},
  {n:"–ì–æ–±–ª–∏–Ω—Å–∫–∞—è –±–æ—á–∫–∞",id:"goblin-barrel",t:45,s:10},{n:"–ì–æ–±–ª–∏–Ω—Å–∫–∏–π –±—É—Ä",id:"goblin-drill",t:30,s:20},{n:"–ì–æ–±–ª–∏–Ω—ã",id:"goblins",t:5,s:10},
  {n:"–ì–æ–ª–µ–º",id:"golem",t:40,s:35},{n:"–ì—Ä–æ–º–æ–≤–µ—Ä–∂–µ—Ü",id:"electro-wizard",t:5,s:10},{n:"–î—Ä–∞–∫–æ–Ω—á–∏–∫",id:"baby-dragon",t:5,s:10},
  {n:"–î—Ä–æ–≤–æ—Å–µ–∫",id:"lumberjack",t:30,s:20},{n:"–ó–∞–º–æ—Ä–æ–∑–∫–∞",id:"freeze",t:70,s:50},{n:"–ó–µ—Ä–∫–∞–ª–æ",id:"mirror",t:60,s:40},
  {n:"–ó–æ–ª–æ—Ç–æ–π —Ä—ã—Ü–∞—Ä—å",id:"golden-knight",t:20,s:15,isChamp:true},{n:"–ö–ª–∞–¥–±–∏—â–µ",id:"graveyard",t:40,s:25},{n:"–ö–ª–µ—Ç–∫–∞ —Å –≥–æ–±–ª–∏–Ω–æ–º",id:"goblin-cage",t:10,s:10,hasEvo:true},
  {n:"–ö–ª–æ–Ω",id:"clone",t:50,s:40},{n:"–ö–æ–ª–¥—É–Ω",id:"wizard",t:15,s:60,hasEvo:true},{n:"–ö–æ—Ä–æ–ª–µ–≤–∞ –ª—É—á–Ω–∏—Ü",id:"archer-queen",t:20,s:15,isChamp:true},
  {n:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –∫–∞–±–∞–Ω—ã",id:"royal-hogs",t:20,s:10},{n:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ —Ä–µ–∫—Ä—É—Ç—ã",id:"royal-recruits",t:40,s:50,hasEvo:true},
  {n:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –≥–∏–≥–∞–Ω—Ç",id:"royal-giant",t:45,s:20,hasEvo:true},{n:"–ö–æ—Ä–æ–ª—å —Å–∫–µ–ª–µ—Ç–æ–≤",id:"skeleton-king",t:20,s:20,isChamp:true},
  {n:"–õ–µ–¥—è–Ω–æ–π –∫–æ–ª–¥—É–Ω",id:"ice-wizard",t:10,s:15},{n:"–õ—É—á–Ω–∏—Ü—ã",id:"archers",t:5,s:10,hasEvo:true},{n:"–ú–∞–≥–∏—á–µ—Å–∫–∏–π –ª—É—á–Ω–∏–∫",id:"magic-archer",t:20,s:30},
  {n:"–ú–∞–ª–µ–Ω—å–∫–∏–π –ü—Ä–∏–Ω—Ü",id:"little-prince",t:30,s:20,isChamp:true},{n:"–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å",id:"mega-knight",t:40,s:70,hasEvo:true},
  {n:"–ú–∏–Ω–∏-–ü.–ï.–ö.–ö.–ê.",id:"mini-pekka",t:5,s:10},{n:"–ú–æ–Ω–∞—Ö",id:"monk",t:25,s:25,isChamp:true},{n:"–ú–æ—Ä—Ç–∏—Ä–∞",id:"mortar",t:45,s:30,hasEvo:true},
  {n:"–ú—É—à–∫–µ—Ç—ë—Ä",id:"musketeer",t:0,s:10,hasEvo:true},{n:"–ù–æ—á–Ω–∞—è –≤–µ–¥—å–º–∞",id:"night-witch",t:25,s:20},{n:"–û–≥–Ω–µ–Ω–Ω–∞—è –ª—É—á–Ω–∏—Ü–∞",id:"firecracker",t:40,s:15,hasEvo:true},
  {n:"–û—Ä–¥–∞ –º–∏–Ω—å–æ–Ω–æ–≤",id:"minion-horde",t:30,s:50},{n:"–ü.–ï.–ö.–ö.–ê.",id:"pekka",t:15,s:20,hasEvo:true},{n:"–ü–∞–ª–∞—á",id:"executioner",t:20,s:20},
  {n:"–ü–µ—á—å",id:"furnace",t:50,s:50},{n:"–ü–ª–∞–º–µ–Ω–Ω—ã–π –¥—Ä–∞–∫–æ–Ω",id:"inferno-dragon",t:25,s:20},{n:"–ü—Ä–∏–Ω—Ü",id:"prince",t:20,s:20},
  {n:"–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞",id:"princess",t:30,s:10},{n:"–†–∞–∫–µ—Ç–∞",id:"rocket",t:45,s:20},{n:"–†—ã–±–∞–∫",id:"fisherman",t:20,s:30},
  {n:"–°–∫–µ–ª–µ—Ç—ã",id:"skeletons",t:5,s:5,hasEvo:true},{n:"–°–ø–∞—Ä–∫–∏",id:"sparky",t:55,s:40},{n:"–°—Ç–µ–Ω–æ–±–æ–∏",id:"wall-breakers",t:20,s:20,hasEvo:true},
  {n:"–¢–æ—Ä–Ω–∞–¥–æ",id:"tornado",t:50,s:20},{n:"–¢—Ä–∏ –º—É—à–∫–µ—Ç—ë—Ä–∞",id:"three-musketeers",t:25,s:40},{n:"–§–µ–Ω–∏–∫—Å",id:"phoenix",t:20,s:15},
  {n:"–•–∏–∂–∏–Ω–∞ –≥–æ–±–ª–∏–Ω–æ–≤",id:"goblin-hut",t:60,s:60},{n:"–¶–µ–ª–∏—Ç–µ–ª—å–Ω–∏—Ü–∞-–≤–æ–∏–Ω",id:"battle-healer",t:50,s:50},{n:"–®–∞—Ä",id:"balloon",t:35,s:25},
  {n:"–®–∞—Ö—Ç—ë—Ä",id:"miner",t:15,s:30},{n:"–®—É—Å—Ç—Ä—ã–π —à–∞—Ö—Ç—ë—Ä",id:"mighty-miner",t:20,s:25,isChamp:true},
  {n:"–≠–ª–µ–∫—Ç—Ä–æ–≥–∏–≥–∞–Ω—Ç",id:"electro-giant",t:70,s:45},{n:"–≠–ª–∏–∫—Å–∏—Ä–Ω—ã–π –≥–æ–ª–µ–º",id:"elixir-golem",t:65,s:60},{n:"–≠–ª–∏—Ç–Ω—ã–µ –≤–∞—Ä–≤–∞—Ä—ã",id:"elite-barbarians",t:80,s:70},
  {n:"–Ø–¥",id:"poison",t:15,s:10},{n:"–Ø—Ä–æ—Å—Ç—å",id:"rage",t:55,s:45},{n:"–ì–æ–±–ª–∏–Ω—à—Ç–µ–π–Ω",id:"goblinstein",t:40,s:20}
];

let deck = Array(8).fill(null);
let slotIdx = 0;
let pendingCard = null;

function openModal(i) { slotIdx = i; document.getElementById('modal').style.display = 'flex'; renderCards(); }
function closeModal() { document.getElementById('modal').style.display = 'none'; }

function renderCards() {
  const q = document.getElementById('search').value.toLowerCase();
  const list = document.getElementById('card-list');
  list.innerHTML = CARDS.filter(c => c.n.toLowerCase().includes(q)).map(c => `
    <div class="card-item" onclick="askType('${c.n}')">
      <img src="https://royaleapi.com/static/img/cards-150/${c.id}.png">
      <div>${c.n}</div>
    </div>
  `).join('');
}

function askType(name) {
  if(deck.some(c => c && c.n === name)) return tg.showAlert("–≠—Ç–∞ –∫–∞—Ä—Ç–∞ —É–∂–µ –≤ –¥–µ–∫–µ!");
  pendingCard = CARDS.find(x => x.n === name);
  document.getElementById('modal').style.display = 'none';
  document.getElementById('evo-choice').style.display = 'flex';
  document.getElementById('btn-evo').style.display = pendingCard.hasEvo ? 'block' : 'none';
  document.getElementById('btn-champ').style.display = pendingCard.isChamp ? 'block' : 'none';
}

function applyChoice(type) {
  let finalCard = {...pendingCard, variant: type};
  if(type === 'evo') finalCard.t += 20; 
  if(type === 'champ') finalCard.s -= 10;

  deck[slotIdx] = finalCard;
  const slotEl = document.getElementById(`s${slotIdx}`);
  const imgEl = document.getElementById(`img${slotIdx}`);
  
  slotEl.className = 'slot filled ' + type;
  imgEl.src = `https://royaleapi.com/static/img/cards-150/${finalCard.id}${type==='evo'?'-ev1':''}.png`;
  imgEl.style.display = 'block';
  document.getElementById(`p${slotIdx}`).style.display = 'none';
  
  document.getElementById('evo-choice').style.display = 'none';
  updateStats();
}

function updateStats() {
  const d = deck.filter(x => x);
  const t = d.reduce((a,b) => a + b.t, 0) / 1.5;
  const s = d.reduce((a,b) => a + b.s, 0) / 1.5;
  document.getElementById('b-tox').style.width = Math.min(100, t) + '%';
  document.getElementById('v-tox').innerText = Math.round(t) + '%';
  document.getElementById('b-skill').style.width = Math.min(100, s) + '%';
  document.getElementById('v-skill').innerText = Math.round(s) + '%';
  document.getElementById('b-love').style.width = Math.max(0, 100 - (t+s)/2) + '%';
}

function startRoast() {
  if(deck.includes(null)) return tg.showAlert("–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ —Å–ª–æ—Ç—ã!");
  const names = deck.map(c => c.n);
  const variants = deck.map(c => c.variant);
  let title, emoji, text;

  // –£–õ–¨–¢–†–ê-–õ–û–ì–ò–ö–ê –ê–ù–ê–õ–ò–ó–ê
  if(variants.includes('evo') && names.includes("–û–≥–Ω–µ–Ω–Ω–∞—è –ª—É—á–Ω–∏—Ü–∞") && names.includes("–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å")) {
    title = "–ì–ï–ô-–ü–†–ê–ô–î –ú–ò–î–õ–ê–î–î–ï–†–ê"; emoji = "üè≥Ô∏è‚Äçüåà";
    text = "–≠–≤–æ-–õ—É—á–∫–∞ –∏ –≠–≤–æ-–ú–ö. –¢—ã —Å–æ–±—Ä–∞–ª –≤—Å–µ —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø—ã —Å–∞–º–æ–≥–æ —Ö—É–¥—à–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏. –¢–≤–æ–∏ —Ä—É–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –Ω–µ –¥–ª—è –∏–≥—Ä—ã, –∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–º–∏ –ø–æ–¥–º–µ—Ç–∞—Ç—å –ø–æ–ª –≤ —Ü–∏—Ä–∫–µ. –ö–∞–∫ —Ç–∞–º –Ω–∞ 5000 –∫—É–±–∫–æ–≤? –ù–µ –∂–º—ë—Ç?";
  } else if(names.includes("–≠–ª–∏—Ç–Ω—ã–µ –≤–∞—Ä–≤–∞—Ä—ã") && variants.includes('evo')) {
    title = "–≠–í–û–õ–Æ–¶–ò–Ø –î–ï–ì–ï–ù–ï–†–ê–¢–ê"; emoji = "üß¨";
    text = "–≠–≤–æ–ª—é—Ü–∏—è –≠–ª–∏—Ç–Ω—ã—Ö –≤–∞—Ä–≤–∞—Ä–æ–≤? –°–µ—Ä—å–µ–∑–Ω–æ? –¢—ã –ø—Ä–æ—Å—Ç–æ –∞–ø–≥—Ä–µ–π–¥–Ω—É–ª —Å–≤–æ–µ –Ω—É–±—Å—Ç–≤–æ –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. –≠—Ç–æ –∫–∞–∫ –¥–∞—Ç—å –æ–±–µ–∑—å—è–Ω–µ –ø—É–ª–µ–º–µ—Ç ‚Äî —Å—Ç—Ä–∞—à–Ω–æ, –Ω–æ –≤—Å—ë –µ—â–µ –æ–±–µ–∑—å—è–Ω–∞.";
  } else if(names.includes("–ê—Ä–±–∞–ª–µ—Ç") && names.includes("–ê–¥—Å–∫–∞—è –±–∞—à–Ω—è")) {
    title = "–¢–†–£–°–õ–ò–í–ê–Ø –ö–†–´–°–ê"; emoji = "üêÄ";
    text = "–ê—Ä–±–∞–ª–µ—Ç –∏ –¢–µ—Å–ª–∞/–ë–∞—à–Ω—è. –¢—ã –±–æ–∏—à—å—Å—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –º–æ—Å—Ç –±–æ–ª—å—à–µ, —á–µ–º —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞. –¢–≤–æ–∏ —è–π—Ü–∞ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏–µ, —á—Ç–æ –∏—Ö –Ω–µ –≤–∏–¥–Ω–æ –¥–∞–∂–µ –ø–æ–¥ –º–∏–∫—Ä–æ—Å–∫–æ–ø–æ–º. –°–∏–¥–∏—à—å –≤ –æ–±–æ—Ä–æ–Ω–µ –∏ –∂–¥–µ—à—å —á—É–¥–∞? –ñ–¥–∏, –æ–Ω–æ –Ω–µ –ø—Ä–∏–¥–µ—Ç.";
  } else if(names.includes("–í—Å–∞–¥–Ω–∏–∫ –Ω–∞ –∫–∞–±–∞–Ω–µ") && names.includes("–ë—Ä–µ–≤–Ω–æ") && variants.includes('evo')) {
    title = "–†–ê–ë –Æ–¢–£–ë–ê"; emoji = "üì∫";
    text = "–û, –æ—á–µ—Ä–µ–¥–Ω–æ–π —Ü–∏–∫–ª –•–æ–≥–∞. –¢—ã –¥–∞–∂–µ –Ω–µ —Å–∞–º —ç—Ç–æ –ø—Ä–∏–¥—É–º–∞–ª, –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –¥–µ–∫—É —É –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–∏—Ç–∞–π—Ü–∞. –£ —Ç–µ–±—è –Ω–µ—Ç —Å–≤–æ–µ–≥–æ –º–Ω–µ–Ω–∏—è, –Ω–µ—Ç —Å–≤–æ–µ–≥–æ —Å—Ç–∏–ª—è, –∏, —Å—É–¥—è –ø–æ –¥–µ–∫–µ, –Ω–µ—Ç –±—É–¥—É—â–µ–≥–æ.";
  } else if(variants.includes('champ') && names.includes("–ú–∞–ª–µ–Ω—å–∫–∏–π –ü—Ä–∏–Ω—Ü")) {
    title = "–ú–ê–ú–ï–ù–¨–ö–ò–ù –°–´–ù–û–ö"; emoji = "üë∂";
    text = "–Æ–∑–∞–µ—à—å –ü—Ä–∏–Ω—Ü–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –≤—ã–≤–æ–∑–∏—à—å –±–µ–∑ –µ–≥–æ –∑–∞—â–∏—Ç—ã? –¢—ã –∫–∞–∫ —Ç–æ—Ç —Ä–µ–±–µ–Ω–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–æ–≤–µ—Ç —Å—Ç–∞—Ä—à–µ–≥–æ –±—Ä–∞—Ç–∞ –Ω–∞ —Ä–∞–∑–±–æ—Ä–∫–∏. –¢–≤–æ–π —Å–∫–∏–ª–ª —Ä–∞–≤–µ–Ω –Ω—É–ª—é, —Ç—ã –ø—Ä–æ—Å—Ç–æ –∂–º–µ—à—å –∞–±–∏–ª–∫—É –ø–æ –æ—Ç–∫–∞—Ç—É.";
  } else if(names.includes("–≠–ª–µ–∫—Ç—Ä–æ–≥–∏–≥–∞–Ω—Ç") && names.includes("–ó–µ—Ä–∫–∞–ª–æ")) {
    title = "–≠–õ–ï–ö–¢–†–û-–®–ò–ó–û–§–†–ï–ù–ò–ö"; emoji = "üîã";
    text = "–≠-–≥–∏–≥–∞–Ω—Ç —á–µ—Ä–µ–∑ –∑–µ—Ä–∫–∞–ª–æ. –¢—ã –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ –±—ã –≤ –∏–≥—Ä–µ –±—ã–ª —á–∞—Ç, —Ç–µ–±—è –±—ã –∑–∞–±–∞–Ω–∏–ª–∏ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –∑–∞ –æ–¥–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ. –ù–∞–¥–µ—é—Å—å, —Ç–≤–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω —Ä–∞–∑—Ä—è–¥–∏—Ç—Å—è –≤ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç.";
  } else if(!names.some(n => ["–ú–µ–≥–∞—Ä—ã—Ü–∞—Ä—å", "–í–µ–¥—å–º–∞", "–ö–æ–ª–¥—É–Ω", "–≠–ª–∏—Ç–∫–∏"].includes(n)) && names.includes("–®–∞—Ö—Ç—ë—Ä")) {
    title = "–ì–ò–ì–ê–ß–ê–î-–°–¢–†–ê–¢–ï–ì"; emoji = "üóø";
    text = "–ù–∏ –æ–¥–Ω–æ–π –≥–µ–π—Å–∫–æ–π –∫–∞—Ä—Ç—ã. –ß–∏—Å—Ç—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ —Å–∫–∏–ª–ª. –¢—ã –ª–∏–±–æ –∑–∞–¥—Ä–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∂–∏–≤–µ—Ç –≤ —ç—Ç–æ–π –∏–≥—Ä–µ, –ª–∏–±–æ –Ω–∞—Å—Ç–æ—è—â–∏–π –≥–µ–Ω–∏–π. –£–≤–∞–∂–∞—é, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ ‚Äî –Ω–∞–π–¥–∏ —Å–µ–±–µ –¥–µ–≤—É—à–∫—É.";
  } else {
    title = "–ú–£–°–û–†–ù–´–ô –ü–û–¢–û–ö"; emoji = "üöÆ";
    text = "–¢—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞–∫–∏–¥–∞–ª —Ä–∞–Ω–¥–æ–º–Ω—ã—Ö –∫–∞—Ä—Ç. –ù–∏ —Å–∏–Ω–µ—Ä–≥–∏–∏, –Ω–∏ —É–º–∞. –¢–≤–æ—è –¥–µ–∫–∞ ‚Äî —ç—Ç–æ –∫—É—á–∞ —ç–ª–∏–∫—Å–∏—Ä–∞, –≤—ã–±—Ä–æ—à–µ–Ω–Ω–∞—è –Ω–∞ –ø–æ–º–æ–π–∫—É. –ü–æ–ø—Ä–æ–±—É–π —Ö–æ—Ç—è –±—ã —Ä–∞–∑–æ–∫ –ø–æ–¥—É–º–∞—Ç—å –≥–æ–ª–æ–≤–æ–π –ø–µ—Ä–µ–¥ –∏–≥—Ä–æ–π.";
  }

  document.getElementById('res-title').innerText = title;
  document.getElementById('res-emoji').innerText = emoji;
  document.getElementById('res-text').innerText = text;
  document.getElementById('res-grid').innerHTML = deck.map(x => `<img src="https://royaleapi.com/static/img/cards-150/${x.id}${x.variant==='evo'?'-ev1':''}.png">`).join('');
  document.getElementById('result').style.display = 'flex';
}

function saveResult() {
  html2canvas(document.getElementById('capture-area')).then(canvas => {
    const a = document.createElement('a'); a.download='roast.png'; a.href=canvas.toDataURL(); a.click();
    tg.showAlert("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!");
  });
}
</script>
</body>
</html>
