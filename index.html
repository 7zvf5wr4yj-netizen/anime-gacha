<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Anime Gacha Empire</title>
  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #151e3d 0%, #511281 100%);
      --card-gradient: linear-gradient(135deg, #22294e 60%, #161928 100%);
      --neon-blue: #34cbff;
      --neon-purp: #be59ff;
      --neon-gold: #ffd700;
      --neon-orange: #ff9900;
      --neon-rainbow: linear-gradient(90deg, #ff00cc 0%, #3333ff 25%, #13ff62 50%, #ffd700 75%, #ff00cc 100%);
    }
    html, body {
      height: 100%; margin: 0; padding: 0;
    }
    body {
      min-height: 100vh;
      background: var(--bg-gradient);
      font-family: 'Segoe UI', Arial, sans-serif;
      color: #fff;
      overflow-x: hidden;
    }
    .wrap {
      max-width: 420px;
      margin: 30px auto 0 auto;
      background: rgba(21,30,61,0.92);
      box-shadow: 0 6px 32px #0009;
      border-radius: 24px;
      padding: 36px 18px 22px 18px;
      position: relative;
      min-height: 670px;
    }
    h1 {
      letter-spacing: 2px;
      font-weight: 700;
      font-size: 2.5em;
      background: linear-gradient(90deg, #34cbff, #be59ff, #ffd700, #be59ff, #34cbff);
      background-size: 400% 100%;
      color: transparent;
      animation: grad 6s linear infinite;
      -webkit-background-clip: text;
      background-clip: text;
      margin: 0 0 12px 0;
      text-align: center;
      text-shadow: 0 0 28px #43e6f744, 0 0 2px #be59ff;
    }
    @keyframes grad {
      0% {background-position:0%}
      100% {background-position:400%}
    }
    .stat-bar {
      display: flex;
      justify-content: space-around;
      font-size: 1.2em;
      margin-bottom: 8px;
      margin-top: 0;
      user-select: all;
    }
    .stat-bar span {
      filter: drop-shadow(0 0 5px #fff7);
    }
    .nav-btns {
      display: flex;
      justify-content: center;
      gap: 14px;
      margin: 17px 0 18px 0;
    }
    button, .select {
      padding: 10px 22px;
      font-size: 1.04em;
      font-weight: 600;
      border: none;
      border-radius: 16px;
      background: linear-gradient(90deg,#31255e 0,#1b53d6 100%);
      color: #fff;
      margin: 0 4px;
      cursor: pointer;
      box-shadow: 0 2px 12px #2a2e5580;
      transition: .14s;
      outline: none;
      user-select: none;
    }
    button:hover, .select:hover {
      background: linear-gradient(90deg, #1b53d6 0, #31255e 100%);
      color: #ffea70;
      box-shadow: 0 0 18px #5093ff99;
      transform: scale(1.04);
    }
    .select {
      background: #23184e;
      padding: 10px 16px;
    }
    /* Gacha Animation */
    .gacha-roller {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 170px;
      margin-bottom: 16px;
      perspective: 800px;
      position: relative;
    }
    .gacha-card-anim {
      font-size: 2.2em;
      font-weight: 700;
      border-radius: 16px;
      text-align: center;
      width: 220px;
      box-shadow: 0 2px 16px #000a, 0 0 55px #a78cffcc;
      background: #262962;
      border: 3.5px solid #b8b6ff;
      opacity: 1;
      transform-style: preserve-3d;
      animation: popIn .27s cubic-bezier(.27,.7,.34,1.4);
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }
    @keyframes popIn {
      0% { opacity:0; transform: scale(0.4) rotateY(-120deg);}
      70% {opacity:1; transform: scale(1.11) rotateY(12deg);}
      90% {opacity:1;}
      100% { opacity:1; transform: scale(1) rotateY(0);}
    }
    .gacha-anim-rarity-EPIC { border:3.5px solid var(--neon-orange); color: var(--neon-orange);}
    .gacha-anim-rarity-LEGEND { border:3.5px solid var(--neon-gold); color: var(--neon-gold); text-shadow:0 0 16px gold;}
    .gacha-anim-rarity-DIVINE { border-image: var(--neon-rainbow) 1; border-width:4px; border-style:solid; background: #fff; color: transparent; background-clip:text;}
    .gacha-anim-rare-sparkle {
      animation: sparkle-glow 1s infinite alternate;
      text-shadow: 0 0 16px #fff, 0 0 16px var(--neon-gold), 0 0 26px #ffea70;
    }
    @keyframes sparkle-glow {
      to {
        text-shadow: 0 0 24px #fff, 0 0 40px var(--neon-gold), 0 0 70px #ffea708a;
      }
    }
    .card-list {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      justify-content: center;
      max-height: 260px;
      overflow-y: auto;
      margin-bottom: 22px;
    }
    .gacha-card {
      min-width: 105px;
      background: var(--card-gradient);
      border-radius: 12px;
      box-shadow: 0 2px 9px #0007, 0 0 0 1.5px #3e2460b8;
      padding: 10px 7px 8px 7px;
      font-size: 1.15em;
      font-weight: 500;
      margin-bottom: 2px;
      text-align: center;
      position: relative;
      border: 2.5px solid #2d3560;
      margin: 0 0 6px 0;
      user-select: text;
    }
    .rarity-color-COMMON { border-color: #34cbff; }
    .rarity-color-RARE { border-color: #be59ff;}
    .rarity-color-EPIC { border-color: orange; box-shadow: 0 0 18px #ff993327;}
    .rarity-color-LEGEND { border-color: gold; box-shadow: 0 0 22px #ffd7007e; font-weight:700;}
    .rarity-color-DIVINE { border-image: var(--neon-rainbow) 1; border-width: 2.5px 4.5px; background: #fff3eb; color: #9264ff; font-weight:600; box-shadow: 0 0 44px #ff00cc44 inset;}
    .gacha-card .rarity {
      font-size: .95em;
      font-weight: 400;
      opacity:.8;
    }
    .gacha-card .pow {font-size:.98em;}
    .gacha-card .hp {font-size:.99em;}

    /* PvP/Other */
    .pvp-battle {
      background: #22294e;
      border-radius: 10px;
      margin-top: 10px;
      padding: 14px 10px;
      box-shadow: 0 0 22px #582cb320;
      font-size: 1.15em;
      min-height: 38px;
      text-align: center;
      position: relative;
    }
    .pvp-res-win { color: #ffe682; text-shadow:0 0 6px #fff9;}
    .pvp-res-lose { color: #b0adad; }
    /* Confetti animation for Divine/Legenadary drops */
    .confetti {
      pointer-events:none;position:fixed;z-index:10002;top:0;left:0;width:100vw;height:100vh;overflow:hidden; }
    .confetti-piece {
      position: absolute;
      width: 10px; height: 18px;
      border-radius: 4px;
      opacity: 0.82;
      animation: confetti-fall 1.2s cubic-bezier(.37,.76,.29,.96);
    }
    @keyframes confetti-fall {
      to {
        transform: translateY(100vh) rotateZ(480deg) scale(.83);
        opacity: 0.6;
      }
    }
    /* Scroll bar */
    ::-webkit-scrollbar { width: 9px; background: #25184e;}
    ::-webkit-scrollbar-thumb { background: #50309f; border-radius: 4px;}
  </style>
</head>
<body>
<div class="wrap" id="app"></div>
<div class="confetti" id="confetti"></div>
<script>
// ...дальнейший JavaScript-код из предыдущего сообщения...
</script>
</body>
</html>